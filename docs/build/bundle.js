var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e,n,o){if(t){const s=r(t,e,n,o);return t[0](s)}}function r(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}function l(t,e,n,o){if(t[2]&&o){const s=t[2](o(n));if(void 0===e.dirty)return s;if("object"==typeof s){const t=[],n=Math.max(e.dirty.length,s.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|s[o];return t}return e.dirty|s}return e.dirty}function a(t,e,n,o,s,c){if(s){const i=r(e,n,o,c);t.p(i,s)}}function u(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function d(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode.removeChild(t)}function h(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function b(){return g(" ")}function v(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t){return""===t?null:+t}function x(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function w(t,e){t.value=null==e?"":e}function k(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function j(t,e,n){t.classList[n?"add":"remove"](e)}let T;function S(t){T=t}function _(t){(function(){if(!T)throw new Error("Function called outside component initialization");return T})().$$.on_mount.push(t)}const C=[],E=[],L=[],B=[],O=Promise.resolve();let N=!1;function M(t){L.push(t)}const q=new Set;let A=0;function I(){const t=T;do{for(;A<C.length;){const t=C[A];A++,S(t),P(t.$$)}for(S(null),C.length=0,A=0;E.length;)E.pop()();for(let t=0;t<L.length;t+=1){const e=L[t];q.has(e)||(q.add(e),e())}L.length=0}while(C.length);for(;B.length;)B.pop()();N=!1,q.clear(),S(t)}function P(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}const U=new Set;let F;function H(){F={r:0,c:[],p:F}}function Y(){F.r||o(F.c),F=F.p}function J(t,e){t&&t.i&&(U.delete(t),t.i(e))}function Q(t,e,n,o){if(t&&t.o){if(U.has(t))return;U.add(t),F.c.push((()=>{U.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function R(t,e){t.d(1),e.delete(t.key)}function z(t,n,c,i){const{fragment:r,on_mount:l,on_destroy:a,after_update:u}=t.$$;r&&r.m(n,c),i||M((()=>{const n=l.map(e).filter(s);a?a.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(M)}function V(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function W(t,e){-1===t.$$.dirty[0]&&(C.push(t),N||(N=!0,O.then(I)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(e,s,c,i,r,l,a,u=[-1]){const d=T;S(e);const f=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(d?d.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:s.target||d.$$.root};a&&a(f.root);let h=!1;if(f.ctx=c?c(e,s.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return f.ctx&&r(f.ctx[t],f.ctx[t]=s)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](s),h&&W(e,t)),n})):[],f.update(),h=!0,o(f.before_update),f.fragment=!!i&&i(f.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);f.fragment&&f.fragment.l(t),t.forEach(p)}else f.fragment&&f.fragment.c();s.intro&&J(e.$$.fragment),z(e,s.target,s.anchor,s.customElement),I()}S(d)}class G{$destroy(){V(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const K=t=>e=>({...e,pairs:e.path.map(((n,o)=>{const s=e.path[e.path[o+1]?o+1:0];return t[n]&&t[n].includes(s)?{base:s,quote:n,side:"BUY"}:t[s]&&t[s].includes(n)?{base:n,quote:s,side:"SELL"}:null})).map((t=>t?{...t,get id(){return`${this.base}${this.quote}`},get tickerName(){return`${this.id.toLowerCase()}@bookTicker`}}:null))});let X;const Z=()=>(X=X||new window.ccxt.binance,X.loadMarkets()).then((t=>Object.values(t).reduce(((t,e,n)=>e.active&&e.spot?(t[e.quote]?t[e.quote].push(e.base):t[e.quote]=[e.base],t):t),{}))).then((t=>Object.entries(t).reduce(((e,[n,o])=>(e[n]=o.filter((o=>!!e[o]||Object.entries(t).some((([t,e])=>t!==n&&e.includes(o))))),e)),{}))),tt=t=>JSON.stringify({method:"SUBSCRIBE",params:t,id:1});function et(t,{stickToTop:e}){const n=function({target:t,boundingClientRect:e}){return t===i?e.y<0:e.y>0},o=new IntersectionObserver((function(e){const o=e[0];let s=!1;!o.isIntersecting&&n(o)&&(s=!0),t.dispatchEvent(new CustomEvent("stuck",{detail:{isStuck:s}}))}),{}),s=new MutationObserver((function(t){t.forEach((function(t){const{parentNode:e}=i,{parentNode:n}=r;i!==e.firstChild&&e.prepend(i),r!==n.lastChild&&n.append(r)}))})),c="position: absolute; height: 1px;",i=document.createElement("div");i.classList.add("stickySentinelTop"),i.style=c,t.parentNode.prepend(i);const r=document.createElement("div");return r.classList.add("stickySentinelBottom"),r.style=c,t.parentNode.append(r),e?o.observe(i):o.observe(r),s.observe(t.parentNode,{childList:!0}),{update({stickToTop:t}){t?(o.unobserve(r),o.observe(i)):(o.unobserve(i),o.observe(r))},destroy(){o.disconnect(),s.disconnect()}}}const nt=t=>({}),ot=t=>({}),st=t=>({}),ct=t=>({}),it=t=>({}),rt=t=>({});function lt(t){let e;const n=t[4].wrapper,o=i(n,t,t[3],rt);return{c(){o&&o.c()},m(t,n){o&&o.m(t,n),e=!0},p(t,s){o&&o.p&&(!e||8&s)&&a(o,n,t,t[3],e?l(n,t[3],s,it):u(t[3]),rt)},i(t){e||(J(o,t),e=!0)},o(t){Q(o,t),e=!1},d(t){o&&o.d(t)}}}function at(t){let e;const n=t[4].wrapper,o=i(n,t,t[3],ot);return{c(){o&&o.c()},m(t,n){o&&o.m(t,n),e=!0},p(t,s){o&&o.p&&(!e||8&s)&&a(o,n,t,t[3],e?l(n,t[3],s,nt):u(t[3]),ot)},i(t){e||(J(o,t),e=!0)},o(t){Q(o,t),e=!1},d(t){o&&o.d(t)}}}function ut(e){let n,c,r,h,g,y,x,w,k,T=!e[0]&&lt(e);const S=e[4].content,_=i(S,e,e[3],ct);let C=e[0]&&at(e);return{c(){n=m("section"),T&&T.c(),c=b(),r=m("div"),_&&_.c(),y=b(),C&&C.c(),$(r,"class","sticky svelte-10zs38h"),$(r,"data-position",h=e[0]?"top":"bottom"),j(r,"isStuck",e[1])},m(o,i){var l;f(o,n,i),T&&T.m(n,null),d(n,c),d(n,r),_&&_.m(r,null),d(n,y),C&&C.m(n,null),x=!0,w||(k=[(l=g=et.call(null,r,{stickToTop:e[0]}),l&&s(l.destroy)?l.destroy:t),v(r,"stuck",e[2])],w=!0)},p(t,[e]){t[0]?T&&(H(),Q(T,1,1,(()=>{T=null})),Y()):T?(T.p(t,e),1&e&&J(T,1)):(T=lt(t),T.c(),J(T,1),T.m(n,c)),_&&_.p&&(!x||8&e)&&a(_,S,t,t[3],x?l(S,t[3],e,st):u(t[3]),ct),(!x||1&e&&h!==(h=t[0]?"top":"bottom"))&&$(r,"data-position",h),g&&s(g.update)&&1&e&&g.update.call(null,{stickToTop:t[0]}),2&e&&j(r,"isStuck",t[1]),t[0]?C?(C.p(t,e),1&e&&J(C,1)):(C=at(t),C.c(),J(C,1),C.m(n,null)):C&&(H(),Q(C,1,1,(()=>{C=null})),Y())},i(t){x||(J(T),J(_,t),J(C),x=!0)},o(t){Q(T),Q(_,t),Q(C),x=!1},d(t){t&&p(n),T&&T.d(),_&&_.d(t),C&&C.d(),w=!1,o(k)}}}function dt(t,e,n){let{$$slots:o={},$$scope:s}=e,{stickToTop:c=!0}=e,i=!1;return t.$$set=t=>{"stickToTop"in t&&n(0,c=t.stickToTop),"$$scope"in t&&n(3,s=t.$$scope)},[c,i,function(t){n(1,i=t.detail.isStuck)},s,o]}class ft extends G{constructor(t){super(),D(this,t,dt,ut,c,{stickToTop:0})}}function pt(t,e,n){const o=t.slice();return o[27]=e[n],o}function ht(t,e,n){const o=t.slice();return o[30]=e[n],o}function mt(t,e,n){const o=t.slice();return o[30]=e[n],o}function gt(t){let e,n,s,c,i,r,l=t[30]+"";function a(){return t[15](t[30])}function u(){return t[16](t[30])}return{c(){e=m("button"),n=g(l),s=b(),$(e,"class","w-24 mr-1 mb-1"),e.value=c=t[30],k(e,"background-color",kt(t[4],t[3],t[30]))},m(o,c){f(o,e,c),d(e,n),d(e,s),i||(r=[v(e,"click",a),v(e,"mouseenter",u),v(e,"mouseleave",t[10])],i=!0)},p(o,s){t=o,2&s[0]&&l!==(l=t[30]+"")&&x(n,l),2&s[0]&&c!==(c=t[30])&&(e.value=c),26&s[0]&&k(e,"background-color",kt(t[4],t[3],t[30]))},d(t){t&&p(e),i=!1,o(r)}}}function bt(t){let e,n,o,s,c=t[1],i=[];for(let e=0;e<c.length;e+=1)i[e]=gt(ht(t,c,e));return{c(){e=m("div"),n=m("div"),n.innerHTML='<span class="text-xl">Quote Assets</span> \n            <span>(select at least 2)</span>',o=b(),s=m("div");for(let t=0;t<i.length;t+=1)i[t].c();$(s,"class","flex flex-wrap justify-center"),$(e,"slot","content")},m(t,c){f(t,e,c),d(e,n),d(e,o),d(e,s);for(let t=0;t<i.length;t+=1)i[t].m(s,null)},p(t,e){if(1818&e[0]){let n;for(c=t[1],n=0;n<c.length;n+=1){const o=ht(t,c,n);i[n]?i[n].p(o,e):(i[n]=gt(o),i[n].c(),i[n].m(s,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=c.length}},d(t){t&&p(e),h(i,t)}}}function vt(t){let e,n,s,c,i,r,l=t[30]+"";function a(){return t[13](t[30])}function u(){return t[14](t[30])}return{c(){e=m("button"),n=g(l),s=b(),$(e,"class","w-24 mr-1 mb-1"),e.value=c=t[30],k(e,"background-color",t[4].includes(t[30])?"#c8c8c8":"#fff")},m(o,c){f(o,e,c),d(e,n),d(e,s),i||(r=[v(e,"click",a),v(e,"mouseenter",u),v(e,"mouseleave",t[10])],i=!0)},p(o,s){t=o,4&s[0]&&l!==(l=t[30]+"")&&x(n,l),4&s[0]&&c!==(c=t[30])&&(e.value=c),20&s[0]&&k(e,"background-color",t[4].includes(t[30])?"#c8c8c8":"#fff")},d(t){t&&p(e),i=!1,o(r)}}}function $t(t){let e,n,o,s,c,i,r=t[2],l=[];for(let e=0;e<r.length;e+=1)l[e]=vt(mt(t,r,e));return{c(){e=m("div"),n=m("div"),o=b(),s=m("div"),s.textContent="Base Assets",c=b(),i=m("div");for(let t=0;t<l.length;t+=1)l[t].c();$(n,"class","h-4"),$(s,"class","text-xl"),$(i,"class","flex flex-wrap justify-center"),$(e,"slot","wrapper"),$(e,"class","p-4")},m(t,r){f(t,e,r),d(e,n),d(e,o),d(e,s),d(e,c),d(e,i);for(let t=0;t<l.length;t+=1)l[t].m(i,null)},p(t,e){if(1812&e[0]){let n;for(r=t[2],n=0;n<r.length;n+=1){const o=mt(t,r,n);l[n]?l[n].p(o,e):(l[n]=vt(o),l[n].c(),l[n].m(i,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&p(e),h(l,t)}}}function yt(t){let e,n,o;return{c(){e=m("div"),n=b(),o=m("p"),o.textContent="No paths found. Try to select different quote and base assets.",$(e,"class","h-4")},m(t,s){f(t,e,s),f(t,n,s),f(t,o,s)},d(t){t&&p(e),t&&p(n),t&&p(o)}}}function xt(t,e){let n,o,s,c,i,r,l,a,u,h,v=e[27].percent+"",y=e[27].joined+"";return{key:t,first:null,c(){n=m("div"),o=m("span"),s=g(v),c=g("%"),i=b(),r=m("div"),l=b(),a=m("span"),u=g(y),h=b(),$(o,"class","w-20 font-bold font-mono flex justify-end"),k(o,"color",e[27].isProfitable?"green":"red"),$(r,"class","w-1"),$(a,"class","w-40"),$(n,"class","flex"),this.first=n},m(t,e){f(t,n,e),d(n,o),d(o,s),d(o,c),d(n,i),d(n,r),d(n,l),d(n,a),d(a,u),d(n,h)},p(t,n){e=t,32&n[0]&&v!==(v=e[27].percent+"")&&x(s,v),32&n[0]&&k(o,"color",e[27].isProfitable?"green":"red"),32&n[0]&&y!==(y=e[27].joined+"")&&x(u,y)},d(t){t&&p(n)}}}function wt(t){let e,n,s,c,i,r,l,a,u,h,j,T,S,_,C,E,L,B,O,N,M,q,A,I,P,U,F,H,Y,W,D,G,K,X,Z,tt,et,nt,ot,st,ct,it,rt,lt,at,ut,dt,ht,mt,gt,vt,wt,kt,Tt,St,_t,Ct,Et,Lt,Bt,Ot,Nt,Mt,qt=(t[0]/1e3).toFixed(4)+"",At=[],It=new Map;dt=new ft({props:{$$slots:{wrapper:[$t],content:[bt]},$$scope:{ctx:t}}});let Pt=!t[5].length&&yt(),Ut=t[5].filter(jt);const Ft=t=>t[27].joined;for(let e=0;e<Ut.length;e+=1){let n=pt(t,Ut,e),o=Ft(n);It.set(o,At[e]=xt(o,n))}return{c(){var o;e=m("div"),n=b(),s=m("div"),c=m("div"),c.innerHTML='<div class="w-full h-full flex justify-center items-center"><img class="w-40" alt="logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ae/Logo_Comit%C3%A9_d%27arbitrage.svg/1024px-Logo_Comit%C3%A9_d%27arbitrage.svg.png"/></div>',i=b(),r=m("div"),l=b(),a=m("div"),u=m("h1"),h=g("Binance "),j=m("span"),T=g("▲"),S=g(" Triangular arbitrage monitor"),_=b(),C=m("h2"),C.textContent="Monitoring arbitrage opportunities on Binance",E=b(),L=m("div"),B=b(),O=m("p"),O.textContent="This app monitors arbitrage opportunities on Binance. It is a web app that uses the Binance API to fetch the\n      current price of the assets and then calculates the arbitrage opportunities. The arbitrage opportunities are then\n      displayed in a table.",N=b(),M=m("div"),q=b(),A=m("div"),I=m("div"),P=m("nav"),P.innerHTML='<ul class="flex gap-4"><li><a class="font-bold" href="#">Triangular</a></li> \n            <li><a href="#">Quadupular</a></li> \n            <li><a href="#">Quintupular</a></li></ul>',U=b(),F=m("form"),H=m("span"),H.textContent="FEES",Y=b(),W=m("div"),D=b(),G=m("input"),K=b(),X=m("div"),Z=b(),tt=m("span"),et=g(qt),nt=g("%"),ot=b(),st=m("div"),ct=b(),it=m("div"),rt=m("div"),lt=m("div"),at=m("div"),at.innerHTML='<div class="text-2xl">Select Assets</div> \n        <p>Click on the assets you want to monitor. First select a couple of quote asset, then the base assets.\n          Hovering over an asset will highlight the related quote assets.\n          Once you&#39;ve selected base and quote assets, the arbitrage results will be displayed on the right.</p>',ut=b(),(o=dt.$$.fragment)&&o.c(),ht=b(),mt=m("div"),gt=b(),vt=m("div"),wt=m("div"),kt=m("div"),kt.textContent="Paths",Tt=b(),Pt&&Pt.c(),St=b(),_t=m("div");for(let t=0;t<At.length;t+=1)At[t].c();Ct=b(),Et=m("div"),Lt=b(),Bt=m("footer"),Bt.textContent="© 2022 - Vince Liem",$(e,"class","h-4"),$(c,"class","w-1/3"),$(r,"class","w-4"),$(j,"id","websocket-status"),k(j,"color",t[6]),$(u,"class","text-2xl"),$(C,"class","test-xl"),$(L,"class","h-4"),$(O,"class","w-[50vw]"),$(M,"class","h-4"),$(W,"class","w-4"),$(G,"type","number"),$(G,"class","p-1"),$(X,"class","w-4"),$(tt,"class","font-mono"),$(F,"id","fees"),$(F,"class","flex items-center justify-center"),$(I,"class","flex items-center justify-between"),$(A,"class","p-4 shadow rounded bg-white"),$(a,"class","flex flex-col w-2/3"),$(s,"class","flex"),$(st,"class","h-4"),$(at,"id","asset-buttons-description"),$(at,"class","p-4"),$(lt,"id","asset-buttons"),$(lt,"class","shadow rounded bg-white"),$(rt,"class","w-1/3"),$(mt,"class","w-4"),$(kt,"class","text-xl flex justify-center"),$(_t,"class","flex flex-wrap justify-center"),$(wt,"class","p-4 shadow rounded bg-white flex flex-col items-center"),$(vt,"class","w-2/3"),$(it,"class","w-full flex"),$(Et,"class","h-4")},m(o,p){f(o,e,p),f(o,n,p),f(o,s,p),d(s,c),d(s,i),d(s,r),d(s,l),d(s,a),d(a,u),d(u,h),d(u,j),d(j,T),d(u,S),d(a,_),d(a,C),d(a,E),d(a,L),d(a,B),d(a,O),d(a,N),d(a,M),d(a,q),d(a,A),d(A,I),d(I,P),d(I,U),d(I,F),d(F,H),d(F,Y),d(F,W),d(F,D),d(F,G),w(G,t[0]),d(F,K),d(F,X),d(F,Z),d(F,tt),d(tt,et),d(tt,nt),f(o,ot,p),f(o,st,p),f(o,ct,p),f(o,it,p),d(it,rt),d(rt,lt),d(lt,at),d(lt,ut),z(dt,lt,null),d(it,ht),d(it,mt),d(it,gt),d(it,vt),d(vt,wt),d(wt,kt),d(wt,Tt),Pt&&Pt.m(wt,null),d(wt,St),d(wt,_t);for(let t=0;t<At.length;t+=1)At[t].m(_t,null);f(o,Ct,p),f(o,Et,p),f(o,Lt,p),f(o,Bt,p),Ot=!0,Nt||(Mt=[v(G,"input",t[11]),v(G,"keyup",t[12])],Nt=!0)},p(t,e){(!Ot||64&e[0])&&k(j,"color",t[6]),1&e[0]&&y(G.value)!==t[0]&&w(G,t[0]),(!Ot||1&e[0])&&qt!==(qt=(t[0]/1e3).toFixed(4)+"")&&x(et,qt);const n={};30&e[0]|16&e[1]&&(n.$$scope={dirty:e,ctx:t}),dt.$set(n),t[5].length?Pt&&(Pt.d(1),Pt=null):Pt||(Pt=yt(),Pt.c(),Pt.m(wt,St)),32&e[0]&&(Ut=t[5].filter(jt),At=function(t,e,n,o,s,c,i,r,l,a,u,d){let f=t.length,p=c.length,h=f;const m={};for(;h--;)m[t[h].key]=h;const g=[],b=new Map,v=new Map;for(h=p;h--;){const t=d(s,c,h),r=n(t);let l=i.get(r);l?o&&l.p(t,e):(l=a(r,t),l.c()),b.set(r,g[h]=l),r in m&&v.set(r,Math.abs(h-m[r]))}const $=new Set,y=new Set;function x(t){J(t,1),t.m(r,u),i.set(t.key,t),u=t.first,p--}for(;f&&p;){const e=g[p-1],n=t[f-1],o=e.key,s=n.key;e===n?(u=e.first,f--,p--):b.has(s)?!i.has(o)||$.has(o)?x(e):y.has(s)?f--:v.get(o)>v.get(s)?(y.add(o),x(e)):($.add(s),f--):(l(n,i),f--)}for(;f--;){const e=t[f];b.has(e.key)||l(e,i)}for(;p;)x(g[p-1]);return g}(At,e,Ft,1,t,Ut,It,_t,R,xt,null,pt))},i(t){Ot||(J(dt.$$.fragment,t),Ot=!0)},o(t){Q(dt.$$.fragment,t),Ot=!1},d(t){t&&p(e),t&&p(n),t&&p(s),t&&p(ot),t&&p(st),t&&p(ct),t&&p(it),V(dt),Pt&&Pt.d();for(let t=0;t<At.length;t+=1)At[t].d();t&&p(Ct),t&&p(Et),t&&p(Lt),t&&p(Bt),Nt=!1,o(Mt)}}}function kt(t,e,n){const o=t.includes(n),s=e.includes(n);return o&&s?"#c8c8e6":o?"#c8c8c8":s?"#c8c8ff":"#fff"}const jt=t=>"percent"in t;function Tt(t,e,n){let o,s,c=75,i=[],r=[],l=[],a=[],u=[],d={},f={},p=[],h="red";function m(){o=new WebSocket("wss://stream.binance.com/stream"),o.onopen=()=>{n(6,h="green"),s=setInterval(b,1e3),p.length>0&&o.send(tt(p))},o.onmessage=t=>{const e=JSON.parse(t.data);if(e?.data){const{s:t,a:n,b:o}=e.data;d[t]={BUY:n,SELL:o},v(u,t)}},o.onclose=()=>{n(6,h="red"),clearInterval(s),setTimeout((()=>{n(6,h="yellow"),m()}),1e3)}}function g(t){const e=[...new Set(t.flatMap((t=>t.pairs.map((t=>t.tickerName)))))];let n=e.filter((t=>!p.includes(t)));n.length>0&&(o.send(tt(n)),p=[...p,...n]);let s=p.filter((t=>!e.includes(t)));var c;s.length>0&&(o.send((c=s,JSON.stringify({method:"UNSUBSCRIBE",params:c,id:312}))),p=p.filter((t=>!s.includes(t))))}function b(){n(5,u=u.sort(((t,e)=>e.percent-t.percent)))}function v(t,e){const o=(c||0)/1e5;n(5,u=t.map(((t,e,n)=>o=>{if(o.percent?!o.pairs.some((({id:t})=>t===n)):!o.pairs.every((({id:e})=>t[e])))return o;const s=o.pairs.reduce(((n,{id:o,side:s})=>{if("BUY"===s)return(n-n*e)/t[o].BUY;const c=n*t[o].SELL;return c-c*e}),1)-1;return{...o,percent:(100*s).toFixed(4),isProfitable:s>0}})(d,o,e)))}function $(){const t=(e=a,e.map((t=>e.map((n=>e.map((e=>t!==n&&t!==e&&n!==e?{path:[t,n,e],joined:`${t}/${n}/${e}`}:null)))))).flat(2).filter(Boolean).reduce(((t,e)=>{const{path:n}=e,o=t.map((t=>t.path.join()));return o.includes(n.join())||o.includes([n[1],n[2],n[0]].join())||o.includes([n[2],n[0],n[1]].join())||t.push(e),t}),[])).map(K(f)).filter((t=>t.pairs.every(Boolean)));var e,n;g(t),v((n=t).length>u.length?n.map((t=>u.find((({joined:e})=>e===t.joined))||t)):u.filter((({joined:t})=>n.map((({joined:t})=>t)).includes(t))))}function x(t){a.includes(t)?n(4,a=a.filter((e=>e!==t))):n(4,a=[...a,t]),$()}function w(t){n(3,l=Object.keys(f).filter((e=>f[e].includes(t))))}_((()=>{Z().then((t=>{f=t,n(1,i=Object.keys(t)),n(2,r=[...new Set(Object.values(t).flat(1))].filter((e=>!Object.keys(t).includes(e))))})),m()}));return[c,i,r,l,a,u,h,v,x,w,function(){n(3,l=[])},function(){c=y(this.value),n(0,c)},()=>v(),t=>x(t),t=>w(t),t=>x(t),t=>w(t)]}return new class extends G{constructor(t){super(),D(this,t,Tt,wt,c,{},null,[-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
